<mat-card class="example-card">
    <mat-card-header>
        <mat-card-title>Productos</mat-card-title>
        <mat-card-subtitle>Control de Stock</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
       <section class="mag-section" align="end">
            <mat-radio-group name="opciones" [(ngModel)]="operacionSeleccionada">
                <mat-radio-button *ngFor="let op of TipoBusqueda" name="opciones" [value]="op" style="margin: 10px">
                    {{op}}
                </mat-radio-button>
            </mat-radio-group>
        </section>

        <section class="mag-section" align="end">
            <mat-checkbox class="example-margin" [(ngModel)]="incluirVariantes" [disabled]="this.cargando">Incluir variantes</mat-checkbox>
        </section>

        <form class="form-wrap" (ngSubmit)="getByProducto_Change()">
            <mat-form-field class="filter" focused="true">
                <mat-label>Buscar Producto por código </mat-label>
                <input matInput  (inputChange)="getByProducto_Change()" type="text" [formControl]="codigoFormControl">
                <mat-hint>No buscar por descripción</mat-hint>
            </mat-form-field>
            <mat-card-actions align="end">
                <button mat-raised-button color="primary" type="submit">Buscar</button>
            </mat-card-actions>
        </form>


    </mat-card-content>


</mat-card>

<br>

<div class="mat-elevation-z8">

  <form [formGroup]="VOForm" autocomplete="off">
    <ng-container formArrayName="VORows">
      <table #table mat-table [dataSource]="dataSourceEditing" class="mat-elevation-z8">

        <ng-container matColumnDef="codigo">
          <th mat-header-cell *matHeaderCellDef> No. </th>
          <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
            {{ element.get('codigo').value }}
          </td>
        </ng-container>

        <ng-container matColumnDef="detalle">
          <th mat-header-cell *matHeaderCellDef> Detalle </th>
          <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
            {{ element.get('detalle').value }}
          </td>
        </ng-container>

        <ng-container matColumnDef="deposito">
          <th mat-header-cell *matHeaderCellDef> Deposito </th>
          <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
            {{ element.get('deposito').value }}
          </td>
        </ng-container>

        <ng-container matColumnDef="stockactual">
          <th mat-header-cell *matHeaderCellDef> stock actual </th>
          <td mat-cell *matCellDef="let element; let i = index" [formGroup]="element">
            <mat-form-field style="width: 70px;">
              <input matInput type="text" formControlName="stockactual" [readonly]="VOForm.get('VORows').value[i].isEditable">
            </mat-form-field>
            <button mat-icon-button class="material-icons save-button"
            matTooltip="Save Changes" (click)="SaveVO(VOForm,i)"
            *ngIf="!VOForm.get('VORows').value[i].isEditable" color="primary">
            <mat-icon>check_circle</mat-icon>
        </button>

        <button mat-icon-button class="material-icons app-toolbar-menu cancel-button"
                    matTooltip="Cancel Changes"
                    matTooltipClass="example-tooltip-red"
                    color="warn"
                    (click)="CancelSVO(VOForm,i)"
                    *ngIf="!VOForm.get('VORows').value[i].isEditable">
                    <mat-icon>cancel</mat-icon>
        </button>

        <button mat-icon-button class="material-icons app-toolbar-menu save-button"
                    *ngIf="VOForm.get('VORows').value[i].isEditable"
                    matTooltip="Edit" color="primary" (click)="EditSVO(VOForm,i)">
                    <mat-icon>edit</mat-icon>
                </button>


          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columnasTabla"></tr>
        <tr mat-row *matRowDef="let row; columns: columnasTabla;"></tr>

      </table>
    </ng-container>
  </form>

      <mat-paginator #paginator [length]="totalRows" [pageIndex]="page - 1"
            [pageSizeOptions]="[5, 10, 50, 100]" (page)="pagesChange($event)"
            [pageSize]="pageSize" aria-label="Select page">
      </mat-paginator>
      <mat-card  >Total Productos {{ totalRows }}</mat-card>
  </div>


